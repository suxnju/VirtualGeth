from Structure.utils import storage_diff

if __name__ == "__main__":
    # groundtruth_storage = {
    #     "0x0175b7a638427703f0dbe7bb9bbf987a2551717b34e79f33b5b1008d1fa01db9": {
    #     "key": "0x000000000000000000000000000000000000000000000000000000000000000b",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000708"
    #     },
    #     "0x036b6384b5eca791c62761152d0c79bb0604c104a5fb6f4eb0703f3154bb3db0": {
    #     "key": "0x0000000000000000000000000000000000000000000000000000000000000005",
    #     "value": "0x000000000000000000000000000000000000000000000000002386f26fc10000"
    #     },
    #     "0x03ee357e7943ec03f4e67bc7709225d54006581d85ebb869100792e9a62fa944": {
    #     "key": "0x6908885217db18c3abdd446136634c92ef886652dc29cae881cb7b0346f30fa8",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000066"
    #     },
    #     "0x09a92279602f30e8a149f42e2ac0bac03ce470b29cf8ea7d2360251ffb5f6930": {
    #     "key": "0x741542cd8f25b57b0b9e5febe61424a199c8c746cf747b73eb056bc3b15988ed",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000065"
    #     },
    #     "0x13cd7bb9021605d99752e29934e518f97e98eaee1e51c2ac0e1d55b58b57232f": {
    #     "key": "0x6c66d2e35b020654ccc237b963f3925205938faf02503e3c1bfc2f7a3d016e21",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000066"
    #     },
    #     "0x16cf99e8fe2522a7191d887960a5424d0b8365a15a970c5e1a395a7ef206f49c": {
    #     "key": "0xc1dcbaa2e1e0d7759851e0c47ec29192c90c8b10a1c82fb2795ced2510d574e5",
    #     "value": "0x00000000000000000000000000000000000000000000000000000000000000c9"
    #     },
    #     "0x21ae5fcbfa59c52c7a7bf5634dc75e9b1ffae765bab25b10325fabf606afc1d6": {
    #     "key": "0x75f3781c7159604cc37f3697b87982e2a06a22f37a9b56d2e5bed5529088cd21",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000066"
    #     },
    #     "0x22ca748ed9bbe4b954e42a67b025c7006b83aad2ce9edda91636ffbd2b0bf9b0": {
    #     "key": "0x88c436780459ba53f3b0f19759d19071b2751f24dd5892fa311daac9893cbb61",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000001"
    #     },
    #     "0x27d40b391fa42420990282360b4e6ae3464d7f7ba9c769289f051db4ff9b41e6": {
    #     "key": "0xad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac562",
    #     "value": "0xd579d4fe1e90a03d545e3d8c01dfc19c2ae3b26ad26ba994a1dec89a435a3dc0"
    #     },
    #     "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563": {
    #     "key": "0x0000000000000000000000000000000000000000000000000000000000000000",
    #     "value": "0x0000000000000000000000005dc12131e65b8f395ab11a2c4e6af717e1b179ba"
    #     },
    #     "0x31264c706fe2d8a5e49ec0705ee894ce5edbdeb8e2cc091d887281039aa43f47": {
    #     "key": "0xb7d6e7eda72a6499ac6f7463fe4432d1d4d344daf6aba19537000f7bc79f0162",
    #     "value": "0x00000000000000000000000000000000000000000000000000000000000000c9"
    #     },
    #     "0x405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace": {
    #     "key": "0x0000000000000000000000000000000000000000000000000000000000000002",
    #     "value": "0x0000000000000000000000005dc12131e65b8f395ab11a2c4e6af717e1b179ba"
    #     },
    #     "0x60db5c3b7327d476a5a10f39be9f82c7606f5ba723332564754ad5a1bac9f032": {
    #     "key": "0xe706459878f093bcbf29548d02cefe7e071999b4eaf0f397e129f84becdf51d5",
    #     "value": "0x00000000000000000000000000000000000000000000000000000000000000c9"
    #     },
    #     "0x674bd8935a523aca0a29959945dea964f570c87e196ec19a40de3524bc4cb336": {
    #     "key": "0x6c5942e15257ab7bcb9b9bb9041c45e824b8ce79cae7f957e673c043fd8f4555",
    #     "value": "0x00000000000000000000000000000000000000000000000000000000000000c9"
    #     },
    #     "0x8048725117155ad5ef9cb75f77fbe235a4558a61159f5364c90d55c3a0d15b7a": {
    #     "key": "ad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac55f",
    #     "value": "000000000000000000000000000000000000000000000000000000005b798f16"
    #     },
    #     "0x8672026a50aeef2f14e6959d45730e3c2305c4a4e205dc42f0804287dde97c2c": {
    #     "key": "0xad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac561",
    #     "value": "0x00000000000000000000000000000000000000000000000000b1a2bc2ec50000"
    #     },
    #     "0x8917538ada50a31d474810dadb13e95e8dc1c279ddff9e512237b5fc1f50d8f1": {
    #     "key": "0xad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac560",
    #     "value": "0x0000000000000000000000005dc12131e65b8f395ab11a2c4e6af717e1b179ba"
    #     },
    #     "0x91658505326bc98ab635c9926645ae87c3c1839c53119f5175f6315ad55d665d": {
    #     "key": "0xaeca9595c25d880c9de7027d33645b60a917e45f30ff05c2e90a90f2fa1c2a28",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000066"
    #     },
    #     "0x9463798f050ef9ef05f95b74b9d34c9eb9fe2ec3a441f3549509c4873e3e3c9d": {
    #     "key": "0xca01adecc13b9a42e1d19659887bb0849449ccc981bcb32fe401ce46b14eb561",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000066"
    #     },
    #     "0xac196c467c2d368e894c9cbaea2b97c01d55a38c9bba41b8d967e3a41dfdd905": {
    #     "key": "0x051b6982d5c48debb5d4f481380063fbc6904d233d7e6d3c2b8b61672f2e27e4",
    #     "value": "0x00000000000000000000000000000000000000000000000000000000000000c9"
    #     },
    #     "0xb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6": {
    #     "key": "0x0000000000000000000000000000000000000000000000000000000000000001",
    #     "value": "0x0000000000000000000000005dc12131e65b8f395ab11a2c4e6af717e1b179ba"
    #     },
    #     "0xc05b66d1108fd9442f8c139c9ad9d8c05bea67542a75573865ef9c629daa388a": {
    #     "key": "0xfdc33378a97f40f6da99911196e5660604897295d22000ba672dd761fbecdbd7",
    #     "value": "0x00000000000000000000000000000000000000000000000000000000000000c9"
    #     },
    #     "0xc0863d1d91543d769583043fc2d0e7c48b2e62f3fbe3933c15a37b83862eecfd": {
    #     "key": "0xc65916d663d52b0a18b63681e34ad6e3e8bb58d57f662b8e7e045ab09fab0385",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000065"
    #     },
    #     "0xc55c9ec7064d6f88f4dcfe02d6db4be26bbfcc25f81dbad0c3c68bac954e936c": {
    #     "key": "0x16bba9bde6f0081d94a597097dd9e65d92426023fc5565fa84e934adb6329e27",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000066"
    #     },
    #     "0xc65a7bb8d6351c1cf70c95a316cc6a92839c986682d98bc35f958f4883f9d2a8": {
    #     "key": "0x000000000000000000000000000000000000000000000000000000000000000a",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000001"
    #     },
    #     "0xc9d46d7164f2090cb410861d332554ae9ee176f11d14509ebdb5c8ca7fc10013": {
    #     "key": "0x89764e4724d5b6f4734cb02002996ced9d361f11c01885debd2e3fe0d5f15701",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000065"
    #     },
    #     "0xd49570e37bbe8223454f5f2e8edd30719d980c8c33ec900ddadf01036026bbf7": {
    #     "key": "0xff72f25d2d44c50b8c338604e50a89c49f49b37e2ae539bd2993d8cac84c8f21",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000065"
    #     },
    #     "0xd963037d457242071d043d77b8c116a2c4285c069e0e07767dacf8618fc2fba5": {
    #     "key": "0x22ca748ed9bbe4b954e42a67b025c7006b83aad2ce9edda91636ffbd2b0bf9b0",
    #     "value": "0x0000000000000000000000000000000000000000000000000000000000000001"
    #     },
    #     "0xb877eecc72e91d14aca1b69c8b40db56519b6cd4d8e9f9aee3c5c93cfcd8d14e": {
    #     "key": "ad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac563",
    #     "value": "000000000000000000000aa70e846b87366ac57cf78fb2222e1ca404ba540600"
    #     },
    #     "0x2e18fd214b6a29d384c6e2576a467c65153fd9841d03dbc5c077e056e3b42241": {
    #     "key": "ad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac564",
    #     "value": "00000000000000000000000000000000000000000000000000b1a2bc2ec50000"
    #     },
    #     "0x40909161991b526f31f419ecd5cae9e17c47ef38d99e74d2e5f8a5b551bb6edc": {
    #     "key": "459a9702703bff4dc267cbba937fd72a0c5c2d54352236b26678603f9d5a3ca0",
    #     "value": "0000000000000000000000000000000000000000000000000000000000000001"
    #     },
    #     "0x530ea683f2e52782955a618a551ccd492f4d7f320f90efc6864de93341b3c641": {
    #     "key": "40909161991b526f31f419ecd5cae9e17c47ef38d99e74d2e5f8a5b551bb6edc",
    #     "value": "0000000000000000000000000000000000000000000000000000000000000001"
    #     }
    #     }

    # generate_storage = {
    #     "0x4": "0x0",
    #     "0x5": "0x2386f26fc10000",
    #     "0x6": "0x0",
    #     "0xa": "0x1",
    #     "0xb": "0x708",
    #     "0x741542cd8f25b57b0b9e5febe61424a199c8c746cf747b73eb056bc3b15988ed": "0x65",
    #     "0x16bba9bde6f0081d94a597097dd9e65d92426023fc5565fa84e934adb6329e27": "0x66",
    #     "0x51b6982d5c48debb5d4f481380063fbc6904d233d7e6d3c2b8b61672f2e27e4": "0xc9",
    #     "0x6c5942e15257ab7bcb9b9bb9041c45e824b8ce79cae7f957e673c043fd8f4555": "0xc9",
    #     "0x89764e4724d5b6f4734cb02002996ced9d361f11c01885debd2e3fe0d5f15701": "0x65",
    #     "0xca01adecc13b9a42e1d19659887bb0849449ccc981bcb32fe401ce46b14eb561": "0x66",
    #     "0x6c66d2e35b020654ccc237b963f3925205938faf02503e3c1bfc2f7a3d016e21": "0x66",
    #     "0xe706459878f093bcbf29548d02cefe7e071999b4eaf0f397e129f84becdf51d5": "0xc9",
    #     "0xff72f25d2d44c50b8c338604e50a89c49f49b37e2ae539bd2993d8cac84c8f21": "0x65",
    #     "0xc65916d663d52b0a18b63681e34ad6e3e8bb58d57f662b8e7e045ab09fab0385": "0x65",
    #     "0xb7d6e7eda72a6499ac6f7463fe4432d1d4d344daf6aba19537000f7bc79f0162": "0xc9",
    #     "0xfdc33378a97f40f6da99911196e5660604897295d22000ba672dd761fbecdbd7": "0xc9",
    #     "0xc1dcbaa2e1e0d7759851e0c47ec29192c90c8b10a1c82fb2795ced2510d574e5": "0xc9",
    #     "0x75f3781c7159604cc37f3697b87982e2a06a22f37a9b56d2e5bed5529088cd21": "0x66",
    #     "0x6908885217db18c3abdd446136634c92ef886652dc29cae881cb7b0346f30fa8": "0x66",
    #     "0xaeca9595c25d880c9de7027d33645b60a917e45f30ff05c2e90a90f2fa1c2a28": "0x66",
    #     "0x0": "0x5dc12131e65b8f395ab11a2c4e6af717e1b179ba",
    #     "0x2": "0x5dc12131e65b8f395ab11a2c4e6af717e1b179ba",
    #     "0x1": "0x5dc12131e65b8f395ab11a2c4e6af717e1b179ba",
    #     "0xad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac560": "0x5dc12131e65b8f395ab11a2c4e6af717e1b179ba",
    #     "0xad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac562": "0xd579d4fe1e90a03d545e3d8c01dfc19c2ae3b26ad26ba994a1dec89a435a3dc0",
    #     "0xad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac563": "0xaa70e846b87366ac57cf78fb2222e1ca404ba540600",
    #     "0xad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac561": "0xb1a2bc2ec50000",
    #     "0xad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac55f": "0x5b798f16",
    #     "0x88c436780459ba53f3b0f19759d19071b2751f24dd5892fa311daac9893cbb61": "0x1",
    #     "0x22ca748ed9bbe4b954e42a67b025c7006b83aad2ce9edda91636ffbd2b0bf9b0": "0x1",
    #     "0xad67d757c34507f157cacfa2e3153e9f260a2244f30428821be7be64587ac564": "0xb1a2bc2ec50000",
    #     "0x459a9702703bff4dc267cbba937fd72a0c5c2d54352236b26678603f9d5a3ca0": "0x1",
    #     "0x40909161991b526f31f419ecd5cae9e17c47ef38d99e74d2e5f8a5b551bb6edc": "0x1"
    # }

    # storage_diff(groundtruth_storage,generate_storage)
    memory = {
        4:int("5dc12131e65b8f395ab11a2c4e6af717e1b179ba000000000000000000000000",16),
        5:0
    }
    offset = 148
    value = int("1e00000000000000000000001111100000000000000000000000000000000000",16)
    value = hex(value).lstrip("0x").rjust(64,"0")
    affect_a = offset//32
    keep = offset%32*2
    a = hex(memory[affect_a]).lstrip("0x").rjust(64,"0")
    a = a[:keep]+value[:64-keep]
    memory[affect_a] = int(a,16)
    
    b = hex(memory[affect_a+1]).lstrip("0x").rjust(64,"0")
    b = value[64-keep:] + b[keep:]
    memory[affect_b] = int(b,16)